-- Variables
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local userInputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")
local replicatedStorage = game:GetService("ReplicatedStorage")
local workspace = game:GetService("Workspace")

local autoBedBreakEnabled = false
local killAuraEnabled = false

-- Function to break beds nearby
local function autoBreakBeds()
    while autoBedBreakEnabled do
        wait(0.5) -- Adjust the frequency of bed-breaking

        for _, bed in pairs(workspace:GetChildren()) do
            if bed:IsA("Model") and bed:FindFirstChild("Bed") then -- Check for bed models
                local bedPosition = bed.PrimaryPart.Position
                local distance = (bedPosition - character.HumanoidRootPart.Position).Magnitude

                if distance <= 10 then -- Adjust range for breaking beds
                    -- Simulate bed breaking
                    fireclickdetector(bed:FindFirstChild("ClickDetector")) -- Use ClickDetector to break the bed
                end
            end
        end
    end
end

-- Function for kill aura
local function killAura()
    while killAuraEnabled do
        wait(0.1) -- Adjust the frequency of kill aura attacks

        for _, enemyPlayer in pairs(game.Players:GetPlayers()) do
            if enemyPlayer ~= player and enemyPlayer.Character and enemyPlayer.Character:FindFirstChild("Humanoid") and enemyPlayer.Character.Humanoid.Health > 0 then
                local enemyPosition = enemyPlayer.Character.HumanoidRootPart.Position
                local distance = (enemyPosition - character.HumanoidRootPart.Position).Magnitude

                if distance <= 25 then -- Adjust range for attacking
                    -- Attack the enemy (Assumes BedWars uses combat scripts involving RemoteEvents)
                    local args = {
                        [1] = enemyPlayer.Character
                    }
                    replicatedStorage.RemoteEventName:FireServer(unpack(args)) -- Replace RemoteEventName with the actual event
                end
            end
        end
    end
end

-- Toggle Auto Bed Break with "B"
userInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if not gameProcessedEvent then
        if input.KeyCode == Enum.KeyCode.B then
            autoBedBreakEnabled = not autoBedBreakEnabled
            if autoBedBreakEnabled then
                autoBreakBeds() -- Start auto-breaking beds
            end
        end
    end
end)

-- Toggle Kill Aura with "K"
userInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if not gameProcessedEvent then
        if input.KeyCode == Enum.KeyCode.K then
            killAuraEnabled = not killAuraEnabled
            if killAuraEnabled then
                killAura() -- Start kill aura
            end
        end
    end
end)

-- Stop Auto Bed Break and Kill Aura when the player dies
player.CharacterAdded:Connect(function(newCharacter)
    autoBedBreakEnabled = false
    killAuraEnabled = false
    character = newCharacter
end)
